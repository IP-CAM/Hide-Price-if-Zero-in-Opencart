<?xml version="1.0" encoding="utf-8"?>
<modification>
  <name>Hide button buy and price of empty price</name>
	<code>hide-button-and-price-of-empty-price</code>
	<author>REDS</author>
	<version>1.0</version>
	<link>https://www.agenciaprai.com/</link>
	<info>This modification will hide the empty price and remove the buy button with value 0</info>

	<file path="system/library/cart/currency.php">
		<operation>
			<search><![CDATA[
			public function format($number, $currency, $value = '', $format = true) {
			]]></search>
			<add position="after"><![CDATA[
			// hide price if zero
			if ($number == 0) return false;
			]]></add>
		</operation>
	</file>
	
	<file path="catalog/view/theme/*/template/extension/module/{featured,latest,special,bestseller}.twig|catalog/view/theme/*/template/product/{category,special,search,manufacturer_info}.twig">
		<operation info="">
			<search><![CDATA[
			<button type="button" onclick="cart.add('{{ product.product_id }}
			]]></search>
			<add position="before"><![CDATA[
			{% if product.price is not empty %}
			]]></add>
		</operation>
		<operation>
			<search><![CDATA[
			<button type="button" onclick="cart.add('{{ product.product_id }}
			]]></search>
			<add position="after"><![CDATA[
			{% endif %}
			]]></add>
		</operation>
	</file>
	
	<file path="catalog/view/theme/*/template/product/product.twig">
		<operation info="hide button buy and price of empty price">
			<search><![CDATA[
			<button type="button" id="button-cart" data-loading-text="{{ text_loading }}" class="btn btn-primary btn-lg btn-block">{{ button_cart }}</button>
			]]></search>
			<add position="replace"><![CDATA[
			{% if price is not empty %}
			<button type="button" id="button-cart" data-loading-text="{{ text_loading }}" class="btn btn-primary btn-lg btn-block">{{ button_cart }}</button>
			{% endif %}
			]]></add>
		</operation>
		<operation info="related products">
			<search><![CDATA[
			<button type="button" onclick="cart.add('{{ product.product_id }}
			]]></search>
			<add position="before"><![CDATA[
			{% if product.price is not empty %}
			]]></add>
		</operation>
		<operation info="related products">
			<search><![CDATA[
			<button type="button" onclick="cart.add('{{ product.product_id }}
			]]></search>
			<add position="after"><![CDATA[
			{% endif %}
			]]></add>
		</operation>
	</file>

</modification>